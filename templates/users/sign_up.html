{% extends 'base.html' %}
{% load static %}


{% block extend_head %}
  <title>Sign Up</title>
  <script src='https://www.google.com/recaptcha/api.js?render={{recaptcha_site_key}}'></script>
{% endblock %}


{% block content %}
  <h3> - Sign Up - </h3>

  <div class="sign_up-container">
    <h2>Sign Up</h2>

    <form id="signupform" method="POST" action="/sign-up">
      {% csrf_token %}

      <label for="email">Email</label>
      {{form.email}}

      <label for="password1">Password</label>
      {{form.password1}}

      <label for="password2">Confirm Password</label>
      {{form.password2}}

      {{form.token}}

      <label class="check-container">Show Passwords
      <input type="checkbox" onclick="showPword()">
      <span class="checkmark"></span>
      </label>

      <div>
        <div>
          <label for="enable_mfa"><strong>Enable MFA (recommended)</strong></label>
            {{ form.enable_mfa }}
        </div>

        <div class="mfa-info" id="mfa-info" style="display: none;">
          <h4>You will be redirected to setup MFA for this account.</h4>
        </div>
      </div>

      <button type="submit">Sign up</button>

    </form>

    <p class="signin-link">
      Have an account? 
      <a href="{% url 'users:sign-in' %}">Sign in here</a>
    </p>
  </div>
{% endblock %}


{% block extend_footer %}
  <script type="text/javascript">
    // Create a variable that can be used in main.js
    var recaptcha_site_key = '{{recaptcha_site_key|safe}}'
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var mfaCheckbox = document.getElementById("id_enable_mfa");
      var mfaInfo = document.getElementById("mfa-info");

      mfaCheckbox.addEventListener("change", function() {
        if (mfaCheckbox.checked) {
          mfaInfo.style.display = "block";
        } else {
          mfaInfo.style.display = "none";
        }
      });
    });
  </script>
{% endblock %}